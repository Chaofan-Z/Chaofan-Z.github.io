<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>动态规划专题 - Zmystery</title><meta description="背包问题分析记得刚刚接触到dp的时候，还是大一参加学院ACM小组例会时。当时学长讲到背包问题时候，觉得很神奇，为什么这样迭代就可以保证的是最优解，记得回去路上还想了很久，可惜当时没有坚持下来（甚至没开始坚持）。今天重新回忆下，做点总结，理一下思路！"><meta property="og:type" content="blog"><meta property="og:title" content="动态规划专题"><meta property="og:url" content="http://yoursite.com/2020/09/02/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E4%B8%93%E9%A2%98/"><meta property="og:site_name" content="Zmystery"><meta property="og:description" content="背包问题分析记得刚刚接触到dp的时候，还是大一参加学院ACM小组例会时。当时学长讲到背包问题时候，觉得很神奇，为什么这样迭代就可以保证的是最优解，记得回去路上还想了很久，可惜当时没有坚持下来（甚至没开始坚持）。今天重新回忆下，做点总结，理一下思路！"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://yoursite.com/img/og_image.png"><meta property="article:published_time" content="2020-09-02T01:26:56.000Z"><meta property="article:modified_time" content="2020-11-11T02:12:09.581Z"><meta property="article:author" content="cfanzheng"><meta property="article:tag" content="动态规划"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://yoursite.com/2020/09/02/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E4%B8%93%E9%A2%98/"},"headline":"Zmystery","image":["http://yoursite.com/img/og_image.png"],"datePublished":"2020-09-02T01:26:56.000Z","dateModified":"2020-11-11T02:12:09.581Z","author":{"@type":"Person","name":"cfanzheng"},"description":"背包问题分析记得刚刚接触到dp的时候，还是大一参加学院ACM小组例会时。当时学长讲到背包问题时候，觉得很神奇，为什么这样迭代就可以保证的是最优解，记得回去路上还想了很久，可惜当时没有坚持下来（甚至没开始坚持）。今天重新回忆下，做点总结，理一下思路！"}</script><link rel="canonical" href="http://yoursite.com/2020/09/02/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E4%B8%93%E9%A2%98/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><meta name="generator" content="Hexo 5.1.1"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="Zmystery" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-09-02T01:26:56.000Z" title="2020-09-02T01:26:56.000Z">2020-09-02</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-11-11T02:12:09.581Z" title="2020-11-11T02:12:09.581Z">2020-11-11</time></span><span class="level-item"><a class="link-muted" href="/categories/Leetcode/">Leetcode</a></span><span class="level-item">8 minutes read (About 1255 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">动态规划专题</h1><div class="content"><h2 id="背包问题分析"><a href="#背包问题分析" class="headerlink" title="背包问题分析"></a>背包问题分析</h2><p>记得刚刚接触到dp的时候，还是大一参加学院ACM小组例会时。当时学长讲到背包问题时候，觉得很神奇，为什么这样迭代就可以保证的是最优解，记得回去路上还想了很久，可惜当时没有坚持下来（甚至没开始坚持）。今天重新回忆下，做点总结，理一下思路！</p>
<a id="more"></a>

<p><strong>动态规划定义：把原问题分解为相对简单的子问题的方式求解复杂问题的方法，适用于有重叠子问题和最优子结构性质的问题</strong></p>
<h3 id="1-01背包问题"><a href="#1-01背包问题" class="headerlink" title="1. 01背包问题"></a>1. 01背包问题</h3><h4 id="1-1-题目"><a href="#1-1-题目" class="headerlink" title="1.1 题目"></a>1.1 题目</h4><p>有N件物品，第$i$件物品的价值是$V_i$，还有一个容量为$V$的背包，问题：怎么装才能尽可能的使得背包里面的物品价值更多？</p>
<h4 id="1-2-思路"><a href="#1-2-思路" class="headerlink" title="1.2 思路"></a>1.2 思路</h4><p>首先要明确每个物品仅有一个，不能多次利用。最直观的方法，可以<strong>暴力搜索</strong>尝试每一种组合，还有就是当时记得看到这种第一反应是贪心可不可以，按照单位价值排序物品，依次放入可不可行。当然贪心是不可以的这里举个例子，物品重量[3, 4, 6, 7]，物品价值为[3, 7, 11, 14]，背包容积10，按照贪心思想会选择重量为3和7的物品，总价值为17，但是实际最佳选择是重量为4和6的物品，其价值为18。</p>
<p>动态规划：用子问题定义状态，dp[i, v]表示前i件物品，v容量，装出的最大价值。转移方程，对第i件物品，空间v的状态来讲，有两种选择，装入第i件物品，不装第i件物品，则有以下方程：$$dp[i, v] = max(dp[i-1, v], dp[i-1, v-cost[i]] + value[i])$$</p>
<h4 id="1-3-伪代码"><a href="#1-3-伪代码" class="headerlink" title="1.3 伪代码"></a>1.3 伪代码</h4><p>对于dp，我觉得写代码之前要搞清几个事情</p>
<ul>
<li>列出子问题状态的表达以及对应意义</li>
<li>动态转移方程</li>
<li>状态初始化值，初始化值和遍历顺序综合考虑，避免出现无法迭代，越界，非法值等问题</li>
<li>遍历顺序，以及特殊限定</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 初始化 dp[N+1][V+1] ，dp[0, 0-&gt;V] = 0,  </span></span><br><span class="line"><span class="comment">// 从1开始，方式i-1越界，设计value和cost时候i-1</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=N; i++)&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> v=cost[i - <span class="number">1</span>]; v&lt;=V; v++)&#123;</span><br><span class="line">    dp[i][v] = <span class="built_in">max</span>(dp[i<span class="number">-1</span>][v], dp[i<span class="number">-1</span>][v-cost[i - <span class="number">1</span>]] + value[i - <span class="number">1</span>])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="复杂度分析：上述代码，空间复杂度O-VN-，时间复杂度O-VN-，按照目前这个情况，似乎时间复杂度没法优化了，但是空间上还可以做点事情。"><a href="#复杂度分析：上述代码，空间复杂度O-VN-，时间复杂度O-VN-，按照目前这个情况，似乎时间复杂度没法优化了，但是空间上还可以做点事情。" class="headerlink" title="复杂度分析：上述代码，空间复杂度O(VN)，时间复杂度O(VN)，按照目前这个情况，似乎时间复杂度没法优化了，但是空间上还可以做点事情。"></a>复杂度分析：上述代码，空间复杂度O(VN)，时间复杂度O(VN)，按照目前这个情况，似乎时间复杂度没法优化了，但是空间上还可以做点事情。</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 初始化 dp[V+1], dp[0-&gt;V] = 0</span></span><br><span class="line"><span class="comment">// 第二层遍历时候，倒序遍历，看转移方程中dp[v - cost[i]]相当于dp[i-1][v-cost[i]]，也就是针对物品i-1更新出来的值，因此只有倒序遍历才能访问到在这个位置上次更新的值如果正序遍历，会在dp[v - cost[i]]覆盖掉dp[i-1][v-cost[i]]变为dp[i][v-cost[i]]</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;N; i++)&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> v=C; v &gt;= cost[i]; v--)&#123;</span><br><span class="line">    dp[v] = <span class="built_in">max</span>(dp[v], dp[v - cost[i]] + value[i])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-4-值得注意的几个点"><a href="#1-4-值得注意的几个点" class="headerlink" title="1.4 值得注意的几个点"></a>1.4 值得注意的几个点</h4><p>刚刚列出了自己认为比较重要的四个点，这里对初始化详细讨论下。首先有几个常见的限定条件：</p>
<ul>
<li>恰好装满背包，初始化dp[0] = 0，其余都负无穷，这样方程转移是必须让容积全部使用后才可以更新，其他的无法通过max更新</li>
<li>物品数量无限（完全背包），二层循环时候，倒序变正序即可，这样更新的是当前物品更新过的之前的状态</li>
</ul>
<h3 id="2-完全背包"><a href="#2-完全背包" class="headerlink" title="2. 完全背包"></a>2. 完全背包</h3><p>区别在于，物品数量不限制。</p>
<h4 id="2-1-思路"><a href="#2-1-思路" class="headerlink" title="2.1 思路"></a>2.1 思路</h4><p>首先对数据筛选，如果物品i重量比物品j低，价值却比其高，那么可以果断舍弃物品j。</p>
<p>其次思考问题，每种物品最多可能只能装k件，那么可以将一个物品拆分为k种物品，强行转换为01背包解决，在此基础上，不用转换为k种物品这么多，用二进制，比如能装7个物品，那么可以转换为4，2，1三种，这样7以下的所有组合都可以考虑到，即便如此整体还是比较繁琐的。</p>
<p>所以，参考1.4，完全背包问题，时间复杂度和01背包可以保持一致都是O(VN)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 初始化, dp[0 -&gt; V] = 0 </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;N; i++)&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> v=cost[i]; v&lt;=V; v++)&#123;</span><br><span class="line">    dp[v] = <span class="built_in">max</span>(dp[v], dp[v-cost[i]] + value[i])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3-小结"><a href="#3-小结" class="headerlink" title="3. 小结"></a>3. 小结</h3><p>其实背包仍然有很多相关问题，比如多重背包问题等。但是就目前看到的题目来说，最近本dp的思想其实是比较重要的，剩下的解题方法和技巧，就在实战中不断磨练吧！</p>
<p>todo : 两个循环调换一下是什么样呢，循环的顺序（是否01or完全）</p>
<h2 id="实际题目"><a href="#实际题目" class="headerlink" title="实际题目"></a>实际题目</h2><h3 id="Leetcode474-一和零"><a href="#Leetcode474-一和零" class="headerlink" title="Leetcode474 一和零"></a>Leetcode474 一和零</h3><p>类似01背包问题，但是其不同之处在于，物品的重量被分割为了两个维度，其余基本是一致的。下面伪代码，设定物品两个维度的限制分别为x和y，物品的价值都是1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实际前面隐藏了个k维度，也就是01背包当中第一个物品的那个维度，这里为了简化空间复杂度，可以看到后面两个遍历是倒序，也是为了访问k-1状态的值</span></span><br><span class="line"><span class="comment">// 注意下面方程中的k-1</span></span><br><span class="line"><span class="comment">// dp[k][i][j] = max(dp[k-1][i][j], dp[k-1][i-x[k]][j-y[k]])</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;<span class="built_in">size</span>; k++)&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=m; i&gt;=<span class="number">0</span>; i--)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=n; j&gt;=<span class="number">0</span>; j--)&#123;</span><br><span class="line">      dp[i][j] = <span class="built_in">max</span>(dp[i][j], dp[i-x[k]][j-y[k]])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="编辑距离，最长公共子串，最长公共子序列等等"><a href="#编辑距离，最长公共子串，最长公共子序列等等" class="headerlink" title="编辑距离，最长公共子串，最长公共子序列等等"></a>编辑距离，最长公共子串，最长公共子序列等等</h3></div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">动态规划</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/11/11/%E5%88%86%E6%B2%BB%E7%AE%97%E6%B3%95/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">分治算法</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/08/31/start/"><span class="level-item">Start</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Zmystery"></figure><p class="title is-size-4 is-block line-height-inherit">Zmystery</p><p class="is-size-6 is-block">Just something</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Beijing</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">3</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Category</p><a href="/categories"><p class="title">1</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">2</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Chaofan-Z" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Chaofan-Z"><i class="fab fa-github"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Leetcode/"><span class="level-start"><span class="level-item">Leetcode</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-11-11T02:10:07.000Z">2020-11-11</time></p><p class="title is-6"><a class="link-muted" href="/2020/11/11/%E5%88%86%E6%B2%BB%E7%AE%97%E6%B3%95/">分治算法</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Leetcode/">Leetcode</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-09-02T01:26:56.000Z">2020-09-02</time></p><p class="title is-6"><a class="link-muted" href="/2020/09/02/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E4%B8%93%E9%A2%98/">动态规划专题</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Leetcode/">Leetcode</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-31T09:36:32.000Z">2020-08-31</time></p><p class="title is-6"><a class="link-muted" href="/2020/08/31/start/">Start</a></p><p class="is-uppercase"></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/11/"><span class="level-start"><span class="level-item">November 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/09/"><span class="level-start"><span class="level-item">September 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/08/"><span class="level-start"><span class="level-item">August 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/%E5%88%86%E6%B2%BB/"><span class="tag">分治</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"><span class="tag">动态规划</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="Zmystery" height="28"></a><p class="size-small"><span>&copy; 2020 cfanzheng</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://yoursite.com',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>